---
title: Lottery Summery
date: 2024-10-09
categories:
  - Project
draft: true
nolastmod: true
---
### 抽奖模块
提供服务的基础模块，调用方(其他模块，比如营销模块)生成奖品并选择抽奖策略，然后调用抽奖模块的接口，抽奖模块根据策略抽奖，返回中奖的奖品。
1. 奖品信息装载
2. 抽奖前的校验
3. 执行抽奖
4. 中奖奖品的分发
##### 抽奖算法
根据奖品设置的中奖概率，通过斐波那契散列到一个Map中，然后生成随机数找到对应的奖品，时间复杂度降到O(1)；当奖品的概率分布差距很大时，可以对概率极小的奖品做Map方案，而其他奖品采用逐个遍历的方案，平衡时间和空间的消耗。

##### 库存扣减
